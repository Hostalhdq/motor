<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Prueba Motor de Reservas Hostal HDQ</title>
</head>
<body>
  <h2>Buscar habitaciones</h2>
  <label>Check-in: <input type="date" id="checkIn"></label><br>
  <label>Check-out: <input type="date" id="checkOut"></label><br>
  <label>Capacidad: <input type="number" id="capacity" value="2"></label><br>
  <button onclick="buscar()">Buscar</button>

  <h3>Resultados:</h3>
  <pre id="result"></pre>

  <h2>Reservar habitación</h2>
  <label>Habitación ID: <input type="number" id="habID"></label><br>
  <label>Nombre: <input type="text" id="nombre"></label><br>
  <label>Email: <input type="email" id="email"></label><br>
  <label>Teléfono: <input type="text" id="telefono"></label><br>
  <label>Check-in: <input type="date" id="resCheckIn"></label><br>
  <label>Check-out: <input type="date" id="resCheckOut"></label><br>
  <button onclick="reservar()">Reservar</button>

  <pre id="resResult"></pre>

  <script>
    // Cambia esta URL por la de tu Apps Script desplegado
    const API_URL = "TU_URL_DE_APPS_SCRIPT";

    async function buscar() {
      const checkIn = document.getElementById("checkIn").value;
      const checkOut = document.getElementById("checkOut").value;
      const capacity = document.getElementById("capacity").value;
      
      const url = `${API_URL}?action=buscar&checkIn=${checkIn}&checkOut=${checkOut}&capacity=${capacity}`;
      const res = await fetch(url);
      const data = await res.json();
      document.getElementById("result").textContent = JSON.stringify(data, null, 2);
    }

    async function reservar() {
      const habID = document.getElementById("habID").value;
      const nombre = document.getElementById("nombre").value;
      const email = document.getElementById("email").value;
      const telefono = document.getElementById("telefono").value;
      const checkIn = document.getElementById("resCheckIn").value;
      const checkOut = document.getElementById("resCheckOut").value;

      const url = `${API_URL}?action=reservar&habID=${habID}&nombre=${encodeURIComponent(nombre)}&email=${encodeURIComponent(email)}&telefono=${telefono}&checkIn=${checkIn}&checkOut=${checkOut}`;
      const res = await fetch(url);
      const data = await res.json();
      document.getElementById("resResult").textContent = JSON.stringify(data, null, 2);
    }
  </script>
</body>
</html>
